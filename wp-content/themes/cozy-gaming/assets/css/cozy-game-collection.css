/**
 * ============================================================================
 * COZY GROVE — Game Collection  (v3.1 — Design System)
 * ============================================================================
 *
 * Grille de jeux façon « bibliothèque de guilde », filtres par type
 * et plateforme, cartes avec score, overlay et meta gaming.
 */


/* ==================================================================
   1. CONTAINER
   ================================================================== */

.cozy-collection {
    max-width: var(--cozy-max-width);
    margin: 0 auto;
    padding: var(--cozy-space-xl) var(--cozy-space-lg);
}


/* ==================================================================
   2. HEADER
   ================================================================== */

.cozy-collection__header {
    margin-bottom: var(--cozy-space-2xl);
}

.cozy-collection__title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--cozy-space-lg);
    padding-bottom: var(--cozy-space-md);
    border-bottom: 1px solid var(--cozy-border);
    position: relative;
}

.cozy-collection__title-row::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 100px;
    height: 1px;
    background: linear-gradient(90deg, var(--cozy-amber), var(--cozy-gold), transparent);
}

.cozy-collection__title {
    display: flex;
    align-items: center;
    gap: var(--cozy-space-sm);
    font-family: var(--cozy-font-display);
    font-size: var(--cozy-text-3xl);
    color: var(--cozy-parchment);
    margin: 0;
}

.cozy-collection__title .lucide {
    width: 28px;
    height: 28px;
    color: var(--cozy-amber);
}

.cozy-collection__count {
    font-family: var(--cozy-font-ui);
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--cozy-muted);
    padding: 4px 14px;
    border: 1px solid var(--cozy-border);
    border-radius: var(--cozy-radius);
    background: var(--cozy-bg-card);
}


/* ==================================================================
   3. SEARCH
   ================================================================== */

.cozy-collection__search {
    margin-bottom: var(--cozy-space-md);
}

.cozy-collection__search .cozy-form__input-icon > .lucide,
.cozy-collection__search .cozy-form__input-icon > i[data-lucide] {
    color: var(--cozy-amber-dim);
}

.cozy-collection__search .cozy-form__input {
    max-width: 360px;
}


/* ==================================================================
   4. FILTERS
   ================================================================== */

.cozy-collection__filters {
    display: flex;
    flex-direction: column;
    gap: var(--cozy-space-md);
}

.cozy-collection__filter-group {
    display: flex;
    align-items: center;
    gap: var(--cozy-space-md);
}

.cozy-collection__filter-label {
    font-family: var(--cozy-font-ui);
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--cozy-faint);
    min-width: 80px;
    flex-shrink: 0;
}

.cozy-collection__filter-pills {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.cozy-collection__pill {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 5px 12px;
    font-family: var(--cozy-font-ui);
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 0.04em;
    color: var(--cozy-muted);
    background: var(--cozy-bg-card);
    border: 1px solid var(--cozy-border);
    border-radius: var(--cozy-radius);
    cursor: pointer;
    transition: all var(--cozy-transition);
    white-space: nowrap;
}

.cozy-collection__pill:hover {
    color: var(--cozy-cream);
    border-color: var(--cozy-faint);
    background: var(--cozy-ink-soft);
}

.cozy-collection__pill.is-active {
    color: var(--cozy-ink);
    background: var(--cozy-amber);
    border-color: var(--cozy-amber);
    font-weight: 600;
    box-shadow: 0 1px 0 var(--cozy-amber-dim),
                0 4px 12px rgba(200, 129, 58, 0.18);
}


/* ==================================================================
   4. GRID
   ================================================================== */

.cozy-collection__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--cozy-space-lg);
}

.cozy-collection[data-columns="2"] .cozy-collection__grid {
    grid-template-columns: repeat(2, 1fr);
}

.cozy-collection[data-columns="4"] .cozy-collection__grid {
    grid-template-columns: repeat(4, 1fr);
}


/* ==================================================================
   5. CARD
   ================================================================== */

.cozy-collection__card {
    position: relative;
    display: flex;
    flex-direction: column;
    background: var(--cozy-bg-card);
    border: 1px solid var(--cozy-border);
    border-radius: var(--cozy-radius);
    overflow: hidden;
    transition: all var(--cozy-transition);
    animation: cozy-fade-in-up 0.5s ease both;
}

/* Trait d'accent gauche */
.cozy-collection__card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 2px;
    height: 100%;
    background: linear-gradient(180deg, var(--cozy-amber), var(--cozy-ember));
    z-index: 3;
    opacity: 0;
    transition: opacity var(--cozy-transition);
}

.cozy-collection__card:hover {
    border-color: var(--cozy-amber-dim);
    transform: translateY(-6px);
    box-shadow:
        0 0 24px var(--cozy-glow-amber),
        var(--cozy-shadow-lg);
}

.cozy-collection__card:hover::before {
    opacity: 1;
}

/* Stagger animation delay */
.cozy-collection__card:nth-child(3n+2) { animation-delay: 0.08s; }
.cozy-collection__card:nth-child(3n+3) { animation-delay: 0.16s; }


/* ── Vignette ── */
.cozy-collection__card-thumb {
    position: relative;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    display: block;
    text-decoration: none;
}

.cozy-collection__card-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
}

.cozy-collection__card:hover .cozy-collection__card-thumb img {
    transform: scale(1.06);
}

.cozy-collection__card-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background:
        radial-gradient(ellipse at center, rgba(200, 129, 58, 0.06) 0%, transparent 60%),
        var(--cozy-ink-soft);
}

.cozy-collection__card-placeholder .lucide {
    width: 48px;
    height: 48px;
    color: var(--cozy-faint);
    stroke-width: 1;
}


/* ── Badge de note ── */
.cozy-collection__card-score {
    position: absolute;
    top: 8px;
    right: 8px;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    background: rgba(34, 32, 28, 0.92);
    backdrop-filter: blur(8px);
    border-radius: var(--cozy-radius);
    font-family: var(--cozy-font-ui);
    font-size: 10px;
    font-weight: 600;
    color: var(--cozy-gold);
    letter-spacing: 0.04em;
}

.cozy-collection__card-score .lucide {
    width: 12px;
    height: 12px;
    color: var(--cozy-gold);
    fill: var(--cozy-gold);
}


/* ── Badge compteur d'articles ── */
.cozy-collection__card-articles {
    position: absolute;
    top: 8px;
    right: 8px;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    background: rgba(34, 32, 28, 0.92);
    backdrop-filter: blur(8px);
    border-radius: var(--cozy-radius);
    font-family: var(--cozy-font-ui);
    font-size: 9px;
    font-weight: 600;
    color: var(--cozy-amber-glow);
    letter-spacing: 0.04em;
    text-transform: uppercase;
}

.cozy-collection__card-articles .lucide {
    width: 11px;
    height: 11px;
    color: var(--cozy-amber);
}


/* ── Badge type d'article ── */
.cozy-collection__card-type {
    position: absolute;
    bottom: 8px;
    left: 8px;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 10px;
    background: rgba(34, 32, 28, 0.85);
    backdrop-filter: blur(8px);
    border-radius: var(--cozy-radius);
    border-left: 2px solid var(--type-color, var(--cozy-amber));
    font-family: var(--cozy-font-ui);
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--cozy-cream);
}


/* ── Contenu de la carte ── */
.cozy-collection__card-body {
    display: flex;
    flex-direction: column;
    gap: var(--cozy-space-sm);
    padding: var(--cozy-space-md) var(--cozy-space-md) var(--cozy-space-xs);
    flex: 1;
}

.cozy-collection__card-title {
    font-size: var(--cozy-text-base);
    font-weight: 700;
    line-height: 1.3;
    margin: 0;
}

.cozy-collection__card-title a {
    color: var(--cozy-cream);
    text-decoration: none;
    transition: color var(--cozy-transition);
}

.cozy-collection__card-title a:hover {
    color: var(--cozy-amber-glow);
}


/* ── Étiquettes plateformes ── */
.cozy-collection__card-platforms {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
}

.cozy-collection__platform-tag {
    display: inline-flex;
    align-items: center;
    padding: 2px 8px;
    font-family: var(--cozy-font-ui);
    font-size: 9px;
    font-weight: 500;
    letter-spacing: 0.04em;
    color: var(--cozy-muted);
    background: var(--cozy-ink-soft);
    border: 1px solid var(--cozy-border);
    border-radius: var(--cozy-radius);
}


/* ── Métadonnées ── */
.cozy-collection__card-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--cozy-space-sm);
}

.cozy-collection__meta-item {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: var(--cozy-text-xs);
    color: var(--cozy-muted);
}

.cozy-collection__meta-item .lucide {
    width: 12px;
    height: 12px;
    color: var(--cozy-amber-dim);
}


/* ── Footer ── */
.cozy-collection__card-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--cozy-space-sm) var(--cozy-space-md);
    border-top: 1px solid var(--cozy-border);
    margin-top: auto;
}

.cozy-collection__card-link {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-family: var(--cozy-font-ui);
    font-size: 10px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--cozy-amber);
    text-decoration: none;
    transition: gap var(--cozy-transition), color var(--cozy-transition);
}

.cozy-collection__card-link:hover {
    color: var(--cozy-amber-glow);
    gap: 8px;
}

.cozy-collection__card-link .lucide {
    width: 14px;
    height: 14px;
}

.cozy-collection__card-link--soon {
    color: var(--cozy-faint);
    cursor: default;
}

.cozy-collection__card-link--soon .lucide {
    width: 12px;
    height: 12px;
}

.cozy-collection__card-date {
    font-family: var(--cozy-font-ui);
    font-size: 9px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--cozy-faint);
}


/* ==================================================================
   6. EMPTY STATE
   ================================================================== */

.cozy-collection__empty {
    grid-column: 1 / -1;
    text-align: center;
    padding: var(--cozy-space-3xl) var(--cozy-space-xl);
    color: var(--cozy-faint);
}

.cozy-collection__empty .lucide {
    width: 48px;
    height: 48px;
    color: var(--cozy-faint);
    margin-bottom: var(--cozy-space-md);
}

.cozy-collection__empty p {
    font-size: var(--cozy-text-base);
    color: var(--cozy-muted);
    margin: 0;
}


/* ==================================================================
   7. PAGINATION
   ================================================================== */

.cozy-collection__pagination {
    margin-top: var(--cozy-space-2xl);
}


/* ==================================================================
   8. RESPONSIVE
   ================================================================== */

@media (max-width: 1100px) {
    .cozy-collection__grid,
    .cozy-collection[data-columns="4"] .cozy-collection__grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 900px) {
    .cozy-collection__grid,
    .cozy-collection[data-columns="4"] .cozy-collection__grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .cozy-collection__filter-group {
        flex-direction: column;
        align-items: flex-start;
    }

    .cozy-collection__filter-label {
        min-width: auto;
    }
}

@media (max-width: 600px) {
    .cozy-collection {
        padding: var(--cozy-space-md);
    }

    .cozy-collection__grid,
    .cozy-collection[data-columns] .cozy-collection__grid {
        grid-template-columns: 1fr;
    }

    .cozy-collection__title-row {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--cozy-space-sm);
    }

    .cozy-collection__title {
        font-size: var(--cozy-text-2xl);
    }
}


/* ==================================================================
   8. GAME ARCHIVE (taxonomy-cozy_game.php)
   ================================================================== */

.cozy-game-archive__header {
    display: flex;
    gap: var(--cozy-space-xl);
    margin-bottom: var(--cozy-space-2xl);
    padding: var(--cozy-space-xl);
    background: var(--cozy-bg-card);
    border: 1px solid var(--cozy-border);
    border-radius: var(--cozy-radius);
    position: relative;
    overflow: hidden;
}

.cozy-game-archive__header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 2px;
    height: 100%;
    background: var(--cozy-amber-dim);
}

/* Cover */
.cozy-game-archive__cover {
    flex-shrink: 0;
    width: 200px;
    border-radius: var(--cozy-radius);
    overflow: hidden;
}

.cozy-game-archive__cover img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: var(--cozy-radius);
}

/* Info */
.cozy-game-archive__info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--cozy-space-sm);
}

.cozy-game-archive__title {
    display: flex;
    align-items: center;
    gap: var(--cozy-space-sm);
    font-family: var(--cozy-font-display);
    font-size: var(--cozy-text-3xl);
    color: var(--cozy-parchment);
    margin: 0;
}

.cozy-game-archive__title .lucide {
    color: var(--cozy-amber);
    width: 28px;
    height: 28px;
}

.cozy-game-archive__desc {
    color: var(--cozy-muted);
    font-size: var(--cozy-text-base);
    line-height: 1.6;
}

.cozy-game-archive__platforms {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: var(--cozy-space-xs);
}

.cozy-game-archive__meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--cozy-space-md);
    margin-top: var(--cozy-space-xs);
}

.cozy-game-archive__meta-item {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: var(--cozy-text-sm);
    color: var(--cozy-muted);
}

.cozy-game-archive__meta-item .lucide {
    width: 14px;
    height: 14px;
    color: var(--cozy-amber-dim);
}

.cozy-game-archive__count {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-family: var(--cozy-font-ui);
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--cozy-amber);
    margin-top: auto;
    padding-top: var(--cozy-space-sm);
}

.cozy-game-archive__count .lucide {
    width: 14px;
    height: 14px;
}

.cozy-game-archive__empty {
    padding: var(--cozy-space-xl);
    text-align: center;
    color: var(--cozy-muted);
}

.cozy-game-archive__empty .lucide {
    width: 40px;
    height: 40px;
    color: var(--cozy-faint);
    margin-bottom: var(--cozy-space-md);
}

/* Responsive */
@media (max-width: 768px) {
    .cozy-game-archive__header {
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: var(--cozy-space-lg);
    }

    .cozy-game-archive__cover {
        width: 160px;
    }

    .cozy-game-archive__title {
        justify-content: center;
        font-size: var(--cozy-text-2xl);
    }

    .cozy-game-archive__platforms,
    .cozy-game-archive__meta {
        justify-content: center;
    }

    .cozy-game-archive__count {
        justify-content: center;
    }
}
