/**
 * ============================================================================
 * COZY GROVE — Design System (main.css)
 * ============================================================================
 *
 * Fondations visuelles : tokens, reset, typographie, layout, utilitaires.
 * Esthétique : Guilde médiévale cozy · Palette ambre & braises · Fond encre.
 *
 * @since 3.0.0
 */


/* ==================================================================
   1. DESIGN TOKENS (Custom Properties)
   ================================================================== */

:root {
    /* ── Couleurs principales ── */
    --cozy-ink:          #22201C;
    --cozy-ink-soft:     #2B2822;
    --cozy-ink-elevated: #332F28;
    --cozy-parchment:    #F5EDD8;
    --cozy-parchment-d:  #E8D9B5;
    --cozy-amber:        #C8813A;
    --cozy-amber-glow:   #D9934E;
    --cozy-amber-dim:    #7A4D20;
    --cozy-ember:        #9B3A1E;
    --cozy-ember-light:  #B8503A;
    --cozy-moss:         #4A6649;
    --cozy-moss-light:   #6B9468;
    --cozy-gold:         #C9A227;
    --cozy-gold-dim:     #7A6018;
    --cozy-cream:        #EDE4CF;
    --cozy-muted:        #9A8E7E;
    --cozy-faint:        #4A4238;
    --cozy-border:       #383028;
    --cozy-glow-amber:   rgba(200,129,58,.1);
    --cozy-glow-gold:    rgba(201,162,39,.08);

    /* ── Aliases sémantiques ── */
    --cozy-bg:             var(--cozy-ink);
    --cozy-bg-card:        var(--cozy-ink-soft);
    --cozy-bg-soft:        #262219;
    --cozy-bg-elevated:    var(--cozy-ink-elevated);
    --cozy-text:           var(--cozy-cream);
    --cozy-text-secondary: var(--cozy-muted);
    --cozy-text-muted:     var(--cozy-faint);
    --cozy-text-on-primary: var(--cozy-ink);

    /* ── États ── */
    --cozy-success:        var(--cozy-moss-light);
    --cozy-success-subtle: rgba(74,102,73,.15);
    --cozy-error:          var(--cozy-ember-light);
    --cozy-error-subtle:   rgba(155,58,30,.12);
    --cozy-warning:        var(--cozy-gold);
    --cozy-warning-subtle: rgba(212,175,55,.1);
    --cozy-info:           var(--cozy-amber-glow);
    --cozy-info-subtle:    rgba(200,129,58,.12);

    /* ── Typographie ── */
    --cozy-font-ui:      'Space Grotesk', sans-serif;
    --cozy-font-pixel:   var(--cozy-font-ui);
    --cozy-font-display: 'DM Serif Display', serif;
    --cozy-font-body:    'Nunito', -apple-system, BlinkMacSystemFont, sans-serif;
    --cozy-font-heading: var(--cozy-font-body);
    --cozy-font-mono:    'Fira Code', 'Consolas', monospace;

    --cozy-text-xs:   0.75rem;
    --cozy-text-sm:   0.875rem;
    --cozy-text-base: 1rem;
    --cozy-text-lg:   1.125rem;
    --cozy-text-xl:   1.25rem;
    --cozy-text-2xl:  1.5rem;
    --cozy-text-3xl:  1.875rem;
    --cozy-text-4xl:  2.25rem;
    --cozy-text-5xl:  3rem;

    /* ── Espacement ── */
    --s1:4px; --s2:8px; --s3:12px; --s4:16px;
    --s5:24px; --s6:32px; --s7:48px; --s8:64px;
    --cozy-space-xs:   0.25rem;
    --cozy-space-sm:   0.5rem;
    --cozy-space-md:   1rem;
    --cozy-space-lg:   1.5rem;
    --cozy-space-xl:   2rem;
    --cozy-space-2xl:  3rem;
    --cozy-space-3xl:  4rem;
    --cozy-space-4xl:  6rem;

    /* ── Rayons ── */
    --cozy-radius:      4px;
    --cozy-radius-sm:   4px;
    --cozy-radius-md:   8px;
    --cozy-radius-lg:   16px;
    --cozy-radius-xl:   24px;
    --cozy-radius-full: 9999px;

    /* ── Shadows & Glows ── */
    --cozy-shadow-sm:    0 1px 3px rgba(0,0,0,.3);
    --cozy-shadow-md:    0 4px 12px rgba(0,0,0,.35);
    --cozy-shadow-lg:    0 8px 30px rgba(0,0,0,.4);
    --cozy-shadow-xl:    0 12px 40px rgba(0,0,0,.5);

    /* ── Transitions ── */
    --cozy-transition:      150ms cubic-bezier(.25,.8,.25,1);
    --cozy-transition-slow: 300ms ease;

    /* ── Layout ── */
    --cozy-max-width:     1200px;
    --cozy-narrow-width:  900px;
    --cozy-header-height: 60px;
    --cozy-grid-gap:      var(--s4);
}


/* ==================================================================
   1b. GLOBAL ANIMATIONS
   ================================================================== */

@keyframes cozy-pulse {
    0%,100% { opacity:1; transform:scale(1); }
    50%     { opacity:.55; transform:scale(.75); }
}

@keyframes cozy-fade-in-up {
    from { opacity:0; transform:translateY(24px); }
    to   { opacity:1; transform:translateY(0); }
}

@keyframes cozy-float {
    0%,100% { transform:translateY(0); }
    50%     { transform:translateY(-6px); }
}

@keyframes cozy-shimmer {
    0%   { background-position:-200% 0; }
    100% { background-position:200% 0; }
}


/* ==================================================================
   2. CSS RESET
   ================================================================== */

*,*::before,*::after { box-sizing:border-box; margin:0; padding:0; }

html {
    -webkit-text-size-adjust: 100%;
    scroll-behavior: smooth;
    scroll-padding-top: calc(var(--cozy-header-height) + var(--cozy-space-lg));
}

body {
    font-family: var(--cozy-font-body);
    font-size: 16px;
    line-height: 1.6;
    color: var(--cozy-cream);
    background: var(--cozy-ink);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    background-image:
        radial-gradient(ellipse at 20% 0%, rgba(200,129,58,.04) 0%, transparent 55%),
        radial-gradient(ellipse at 80% 100%, rgba(74,102,73,.03) 0%, transparent 50%);
}

body.menu-open { overflow:hidden; }

img,picture,video,canvas,svg { display:block; max-width:100%; height:auto; }

a { color:inherit; text-decoration:none; transition:color var(--cozy-transition); }
a:hover { color:var(--cozy-amber-glow); }

ul,ol { list-style:none; }

input,button,textarea,select { font:inherit; color:inherit; }
button { cursor:pointer; border:none; background:none; }

::selection { background:var(--cozy-amber); color:var(--cozy-ink); }


/* ==================================================================
   3. TYPOGRAPHIE
   ================================================================== */

h1,h2,h3,h4,h5,h6 {
    font-family: var(--cozy-font-body);
    font-weight: 800;
    line-height: 1.2;
    color: var(--cozy-cream);
}

h1 { font-size:var(--cozy-text-4xl); }
h2 { font-size:var(--cozy-text-3xl); }
h3 { font-size:var(--cozy-text-2xl); }
h4 { font-size:var(--cozy-text-xl); }
h5 { font-size:var(--cozy-text-lg); }
h6 { font-size:var(--cozy-text-base); font-weight:700; }

p { margin-bottom:1em; color:var(--cozy-muted); }
strong { font-weight:600; }

.cozy-display { font-family:var(--cozy-font-display); color:var(--cozy-parchment); line-height:1.1; }
.cozy-display em { font-style:italic; color:var(--cozy-amber-glow); }

.cozy-pixel {
    font-family: var(--cozy-font-ui);
    font-size: 10px;
    font-weight: 600;
    color: var(--cozy-amber);
    letter-spacing: .14em;
    text-transform: uppercase;
}

.pixel-hr,
.cozy-section-divider {
    border: none;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--cozy-border), transparent);
    margin: var(--s6) 0;
}

.cozy-divider {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: var(--cozy-space-xl) 0;
}

.cozy-divider::before,
.cozy-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--cozy-amber-dim), transparent);
}

.cozy-divider__dot,
.cozy-section-divider__diamond {
    width: 8px;
    height: 8px;
    background: var(--cozy-gold);
    transform: rotate(45deg);
    flex-shrink: 0;
    box-shadow: 0 0 10px var(--cozy-glow-gold);
}

code, pre { font-family:'Fira Code','Consolas',monospace; font-size:0.9em; }

pre {
    background: var(--cozy-ink-soft);
    border: 1px solid var(--cozy-border);
    border-radius: var(--cozy-radius);
    padding: var(--cozy-space-lg);
    overflow-x: auto;
    color: var(--cozy-cream);
}


/* ==================================================================
   4. LUCIDE ICONS
   ================================================================== */

.lucide { width:18px; height:18px; stroke-width:1.75; display:inline-block; vertical-align:middle; flex-shrink:0; }
.cozy-icon--sm .lucide, .lucide.cozy-icon--sm { width:14px; height:14px; }
.cozy-icon--lg .lucide, .lucide.cozy-icon--lg { width:24px; height:24px; }
.cozy-icon--xl .lucide, .lucide.cozy-icon--xl { width:32px; height:32px; }


/* ==================================================================
   5. LAYOUT
   ================================================================== */

.cozy-container { width:100%; max-width:var(--cozy-max-width); margin:0 auto; padding:0 var(--cozy-space-lg); }
.cozy-main { flex:1; padding:calc(var(--cozy-header-height) * 1.5) 0 var(--cozy-space-2xl); }


/* ==================================================================
   6. GRILLE DE POSTS
   ================================================================== */

.cozy-posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--cozy-grid-gap);
}


/* ==================================================================
   7. PAGINATION
   ================================================================== */

.cozy-pagination .nav-links { display:flex; align-items:center; justify-content:center; gap:var(--cozy-space-sm); margin-top:var(--cozy-space-3xl); }

.cozy-pagination .page-numbers {
    display: flex; align-items: center; justify-content: center;
    min-width: 40px; height: 40px; padding: 0 var(--cozy-space-sm);
    font-family: var(--cozy-font-ui); font-size: 10px; font-weight: 600;
    color: var(--cozy-muted);
    border: 1px solid var(--cozy-border); border-radius: var(--cozy-radius);
    transition: all var(--cozy-transition);
}

.cozy-pagination .page-numbers:hover { color:var(--cozy-amber-glow); border-color:var(--cozy-amber-dim); }

.cozy-pagination .page-numbers.current {
    background: var(--cozy-amber);
    color: var(--cozy-ink); border-color: transparent;
}


/* ==================================================================
   8. ENTRY CONTENT
   ================================================================== */

.entry-content > * + * { margin-top:1.5em; }
.entry-content h2 { margin-top:2.5em; margin-bottom:0.5em; }
.entry-content h3 { margin-top:2em; margin-bottom:0.5em; }
.entry-content h4 { margin-top:1.5em; margin-bottom:0.5em; }
.entry-content p { color:var(--cozy-cream); line-height:1.8; }
.entry-content ul, .entry-content ol { padding-left:1.5em; }
.entry-content ul { list-style-type:disc; }
.entry-content ol { list-style-type:decimal; }
.entry-content li + li { margin-top:0.5em; }
.entry-content li { color:var(--cozy-cream); }

.entry-content blockquote {
    border-left: 2px solid var(--cozy-amber);
    padding: var(--cozy-space-lg);
    background: rgba(200,129,58,.06);
    color: var(--cozy-muted);
    font-style: italic;
    border-radius: 0 var(--cozy-radius) var(--cozy-radius) 0;
}

.entry-content img { border-radius:var(--cozy-radius); }
.entry-content a { color:var(--cozy-cream); }
.entry-content a:hover { text-decoration-thickness:2px; }

.entry-content table { width:100%; border-collapse:collapse; font-size:var(--cozy-text-sm); }
.entry-content th, .entry-content td { border:1px solid var(--cozy-border); padding:var(--cozy-space-sm) var(--cozy-space-md); text-align:left; }
.entry-content th { background:var(--cozy-ink-soft); font-weight:600; }

.entry-content hr {
    border: none; height: 1px;
    background: linear-gradient(90deg, transparent, var(--cozy-border), transparent);
    margin: var(--cozy-space-2xl) 0;
}


/* ==================================================================
   9. UTILITIES
   ================================================================== */

.cozy-label, .section-label {
    font-family: var(--cozy-font-ui); font-size:10px;
    font-weight: 600;
    color: var(--cozy-amber); letter-spacing:.18em; text-transform:uppercase;
}

.cozy-xp-bar { height:4px; background:var(--cozy-border); border-radius:3px; overflow:hidden; }
.cozy-xp-bar__fill { height:100%; background:var(--cozy-amber); border-radius:3px; }
.slots-bar { width:80px; height:3px; background:var(--cozy-border); border-radius:2px; overflow:hidden; }
.slots-bar__fill { height:100%; background:var(--cozy-moss-light); border-radius:2px; transition:width 400ms ease; }
.slots-bar__fill.amber { background:var(--cozy-amber); }
.slots-bar__fill.full { background:var(--cozy-ember); }

.status-indicator { display:inline-flex; align-items:center; gap:6px; font-family:var(--cozy-font-ui); font-size:10px; font-weight:500; letter-spacing:.1em; }
.status-dot { width:6px; height:6px; border-radius:50%; animation:cozy-pulse 2.2s infinite; }
.status-dot.green { background:#5EAE6A; }
.status-dot.amber { background:var(--cozy-amber); }
.status-dot.red   { background:var(--cozy-ember-light); animation:none; }

.cozy-glass { background:var(--cozy-bg-elevated); backdrop-filter:blur(16px); -webkit-backdrop-filter:blur(16px); border:1px solid var(--cozy-border); }


/* ==================================================================
   10. EMPTY / 404 STATES
   ================================================================== */

.cozy-empty { text-align:center; padding:var(--cozy-space-4xl) var(--cozy-space-xl); }
.cozy-empty__icon { color:var(--cozy-amber-dim); margin-bottom:var(--cozy-space-md); }
.cozy-empty__icon .lucide { width:48px; height:48px; stroke-width:1.25; }
.cozy-empty__title { font-size:var(--cozy-text-2xl); margin-bottom:var(--cozy-space-sm); }
.cozy-empty__text { color:var(--cozy-muted); max-width:400px; margin:0 auto var(--cozy-space-xl); }


/* ==================================================================
   11. ACCESSIBILITY
   ================================================================== */

.screen-reader-text { clip:rect(1px,1px,1px,1px); clip-path:inset(50%); width:1px; height:1px; overflow:hidden; position:absolute; white-space:nowrap; }
.screen-reader-text:focus { clip:auto; clip-path:none; width:auto; height:auto; overflow:visible; position:static; background:var(--cozy-ink-soft); padding:var(--cozy-space-md); z-index:100000; }

.skip-link { position:fixed; top:-100px; left:var(--cozy-space-md); z-index:100000; padding:var(--cozy-space-sm) var(--cozy-space-md); background:var(--cozy-amber); color:var(--cozy-ink); font-size:var(--cozy-text-sm); border-radius:0 0 var(--cozy-radius) var(--cozy-radius); transition:top var(--cozy-transition); }
.skip-link:focus { top:0; }

:focus-visible { outline:2px solid var(--cozy-amber); outline-offset:2px; }


/* ==================================================================
   12. SEARCH FORM
   ================================================================== */

.cozy-search-form { position:relative; max-width:400px; }
.cozy-search-form__input { width:100%; padding:11px 44px 11px 14px; background:var(--cozy-ink-soft); border:1px solid var(--cozy-border); border-radius:var(--cozy-radius); font-size:var(--cozy-text-sm); color:var(--cozy-cream); transition:border-color var(--cozy-transition), box-shadow var(--cozy-transition); }
.cozy-search-form__input:focus { outline:none; border-color:var(--cozy-amber-dim); box-shadow:0 0 0 3px rgba(200,129,58,.08); }
.cozy-search-form__input::placeholder { color:var(--cozy-faint); }
.cozy-search-form__btn { position:absolute; right:4px; top:50%; transform:translateY(-50%); padding:6px; color:var(--cozy-muted); transition:color var(--cozy-transition); }
.cozy-search-form__btn:hover { color:var(--cozy-amber); }


/* ==================================================================
   13. RESPONSIVE
   ================================================================== */

@media (max-width:900px) {
    :root { --cozy-text-4xl:1.875rem; --cozy-text-3xl:1.5rem; --cozy-text-2xl:1.25rem; }
    .cozy-container { padding:0 var(--cozy-space-md); }
    .cozy-main { padding:var(--cozy-space-xl) 0; }
}

@media (max-width:600px) {
    .cozy-posts-grid { grid-template-columns:1fr; }
}
